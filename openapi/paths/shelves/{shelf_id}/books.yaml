post:
  tags:
    - Book
  summary: "Add book to a shelf"
  description: |
    Add a single book to the specified shelf.
    Only the shelf's owner or an admin can perform this operation.
    
    **Note:** Even if you are an admin, you cannot add a book that the user does not own to one of their shelves. 
    In such cases, the operation will be rejected with a `403 Forbidden` response.
  operationId: addBookToShelf
  parameters:
    - $ref: ../../../components/parameters/shelf_id.yaml

  requestBody:
    required: true
    description: UUID of the book to add to the shelf.
    content:
      application/json:
        schema:
          type: object
          properties:
            book_id:
              type: string
              format: uuid
              description: UUID of the book to add.
          required:
            - book_id
        example:
          book_id: "8f2a8b48-42fb-4391-87d9-293adbe22d4b"

  responses:
    "204":
      description: The book was succesfully added to the shelf.
    "401":
      $ref: ../../../components/responses/Unauthorized.yaml
    "403":
      $ref: ../../../components/responses/Forbidden.yaml
    "404":
      description: The requested book or shelf was not found or cannot be accessed.
    "409":
      description: The provided book is already present in this shelf.

  security:
    - prosaToken: []
    - apiKey: []

get:
  tags:
    - Book
  summary: "List books in a shelf"
  description: |
    Retrieve the list of book UUIDs in the specified shelf.
    Only the shelf's owner or an admin can access this list.
  operationId: listBooksInShelf
  parameters:
    - $ref: ../../../components/parameters/shelf_id.yaml

  responses:
    "200":
      description: List of book IDs in the shelf.
      content:
        application/json:
          schema:
            type: array
            items:
              type: string
              format: uuid
            description: List of book UUIDs.
          examples:
            success:
              summary: Example list of books in shelf
              value:
                - "2fa53248-7516-4269-8783-845751a9084c"
                - "c5e2f477-e8a3-4761-ad8a-b82e697a4b0c"
    "401":
      $ref: ../../../components/responses/Unauthorized.yaml
    "403":
      $ref: ../../../components/responses/Forbidden.yaml
    "404":
      $ref: ../../../components/responses/shelves/ShelfNotFound.yaml

  security:
    - prosaToken: []
    - apiKey: []
