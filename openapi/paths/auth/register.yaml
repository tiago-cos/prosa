post:
  tags:
    - Authentication
  summary: "Register"
  description: |
    Register a new user.
    The new user can either be an admin or a regular user.
    To register an admin user, the admin key must be provided in the request body.
  operationId: register
  requestBody:
    required: true
    description: Request body for adding a new user.
    content:
      application/json:
        schema:
          type: object
          properties:
            username:
              type: string
              description: The username of the new user
            password:
              type: string
              description: The password of the new user
            admin_key:
              type: string
              description: The admin key to register an admin user
          required:
            - username
            - password
        examples:
          user:
            summary: User request body
            value:
              username: "johndoe"
              password: "password123"
          admin:
            summary: Admin request body
            value:
              username: "admin"
              password: "password123"
              admin_key: "88ce1268d9f1dda402cd172"

  responses:
    "200":
      description: Tokens and user ID for the newly registered user.
      content:
        application/json:
          schema:
            type: object
            properties:
              jwt_token:
                type: string
                description: Base64-encoded JWT access token
              refresh_token:
                type: string
                description: Refresh token used to obtain new JWTs
              user_id:
                type: string
                format: uuid
                description: UUID of the authenticated user
            required:
              - jwt_token
              - refresh_token
              - user_id
          examples:
            success:
              summary: Example login response
              value:
                jwt_token: "ZXlKMGVYQWlPaUpLVjFRaUxDSmhiR2NpT2lKSVV6STFOaUo5LmV5SnliMnhsSWpwN0lsVnpaWElpT2lKaFpHRm1JbjBzSW1WNGNDSTZNVGN6T0RFNE1UTTNNWDAuZExmYWJFVnJ6VXI1eTgwNTlFTUl0dC1VLXhoc2lQWlFYU3R5WUo4Q29hYw=="
                refresh_token: "ez6K5tTdum8rAOdCV4vdoyuSxDeALroCDrJyR4n8JcMtJIHWbH3IJfz1cWp0mx5k"
                user_id: "2c5f1d4d-3b9d-4b9d-3b9d-4b9d3b9d3b9d"
    "400":
      $ref: ../../components/responses/users/InvalidUsernamePassword.yaml
    "403":
      $ref: ../../components/responses/users/InvalidCredentials.yaml
    "409":
      $ref: ../../components/responses/users/UserConflict.yaml

  security: []